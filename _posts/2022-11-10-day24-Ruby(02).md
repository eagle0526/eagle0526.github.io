---
title: ASTRO Camp Day24 - Ruby
author: YeeChen
date: 2022-11-10
category: Ruby
layout: post
---



ruby hash
------

舊版
```md
> h = { :name => "ccc", :age => 18 }
```
  
新版
```md
> h = { :name: "ccc", :age: 18 }
```

不過其實把 h 印出來，其實還是跟舊版一樣，新版的寫法只是語法糖，實際是沒改的
```md
> p h             # { :name => "ccc", :age => 18 }
```


### hash 取值

記得取值要特別注意要放符號，要不然value印不出來

錯誤示範
```md
> p h["name"]  # X
```

正確示範    
```md
> p h[:name]   # "ccc"
```


p profile.keys   #[:name, :age]
p profile.values   #["ccc", 18]


Symbol 符號
------
  
ruby中的的數字object_id，所有數字的object_id都是奇數(2n+1)，因此可以推斷出所有字串的object_id都是偶數  
  
字串的object_id  
```md
p "hello".object_id         # 60
p "hello".object_id         # 80
p "hello".object_id         # 100
```

符號的object_id  
```md
p :name.object_id           # 71068
p :name.object_id           # 71068
p :name.object_id           # 71068
```


數字的object_id -> 2n + 1  
```md
p 100.object_id             # 201
p 100.object_id             # 201
p 100.object_id             # 201
```




測驗 - 計算陣列中，所有字數出現次數
------
```md
> a = [1, 2, 3, 1, 2, 1, 3, 1, 2, 3, 4, 5, 6]
> 
> p a.group_by{ |n| n }.transform_values(&:size) -> 比較複雜的解法
> 
> p a.tally   -> 正確答案是這個
> 
> 會印出 {1=>4, 2=>3, 3=>3, 4=>1, 5=>1, 6=>1}
```


區域變數的nameError
------

下面會印不出來喔!!!
因為a是在外面定義變數，ruby不會從外面找答案

```md
> a = 1
> def hi
>   p a
> end
> 
> hi            # nameError
```


> --  
> **面試題**  -> 未寫完，記得補寫  
> Book.find      =>   
> Book.find_by   => nil  
> Book.find_by!  => Exception  
> --  
{: .block-tip}





























